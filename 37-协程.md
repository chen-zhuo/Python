# 协程

### 定义

**协程，又称微线程。一个进程可以有多个线程，一个线程可以有多个协程。**（**进程>=线程>=协程**）

**进程和线程都是由系统控制，协程是由程序猿控制。**

### 特点

优点：内存开销更小，可根据事件切换，避免了无意义的调度，更有效的利用CPU，提高性能。

缺点：程序员必须自己承担调度责任，同时协程也失去了标准线程使用多cpu的能力。

### 效率

协程最大的优势就是极高的执行效率。

协程的切换是由程序自身控制，和线程相比，没有线程切换的开销；和多线程比，线程数量越多，协程的性能优势就越明显。

协程不需要多线程的锁机制，因为只有一个线程，也不存在同时写变量冲突，在协程中控制共享资源不加锁，只需要判断状态就好了，所以执行效率比多线程高很多。

因为协程是一个线程执行，要利用多核CPU，最简单的方法是：多进程+协程，既充分利用多核，又充分发挥协程的高效率，可获得极高的性能。
