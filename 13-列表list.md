# 列表list

### 定义

**列表（list）是Python中用来存储数据的一个数据类型。**

列表里面能存储多个数据，里面存储的**单个数据**叫**元素**。

### 特点

1. 列表里面的数据是**有序的** （可以使用下标）
2. **列表里面元素的个数和值都是可变**，列表里面可以计算
3. **元素可以是任何类型的数据**
4. **用 [ ] 表示一个列表，里面多个元素之间用逗号隔开。（没有元素表示 [ ] 空列表）**

```
[1]       ['abc', 123]       [196.5, 'njind62', 789]       [,[456]]
```

### 类型转换

方法：**list（数据）**

字符型可以转换为列表，列表也可以转换为字符型。

```
lis = list('abc123')
print(lis, type(lis))    # ['a', 'b', 'c', '1', '2', '3'] <class 'list'>
lis2 = str(lis)
print(lis2, type(lis2))  # ['a', 'b', 'c', '1', '2', '3'] <class 'str'>
```

整型、浮点型、布尔型都不能转换为列表（因为不可迭代），列表也不能转换为整型、浮点型，**但列表可以转化为布尔型，只要有元素的列表布尔值都为True，没有元素的空列表布尔值为False。**

### 列表方法

##### 列表推导式

可以通过循环来规律的获取需要的元素，放入列表中。

```
list1 = list(i for i in range(10))
print(list1)  # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

list2 = list(i * 2 for i in range(10))
print(list2)  # [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]

list3 = list(i * 2 for i in range(10) if i % 3 == 0)  # 注释：先for循环输出元素，再通过if判断，最后将元素值乘以2。
print(list3)  # [0, 6, 12, 18]
```

##### 下标

**列表和字符串一样，每个元素都有一个对应位置的下标：0 - 列表长度-1； -1 - 列表长度**

```
names = ['路飞', '佐罗', '娜美', '鸣人', '佐助']
print(names[2])   # 娜美
print(names[-3])  # 娜美
print(names[5])   # 错误，索引超界
```

##### 切片

**列表和字符串的切片操作一样，唯独不一样的是：字符串切片结果是字符串，列表切片结果是一个列表。**

1. 列表名[ 起始下标:结束下标 ]：获取从起始下标到**结束下标前**的所有的元素。
2. 列表名[ : ]：起始下标和结束下标都可以不写，默认为全列表
3. 列表名[ 起始下标:结束下标:步进 ]：从起始下标开始，每次下标值加步进获取下一个元素，直到结束下标前为止。

**注意：起始下标和结束结束是前闭后开，不能取到结束下标的元素。**

**注意：起始下标和结束结束下标都可以超界，不会报错。**

```
names = ['路飞', '佐罗', '娜美', '鸣人', '佐助']
print(names[1:4])    # ['佐罗', '娜美', '鸣人']
print(names[-4:-1])  # ['佐罗', '娜美', '鸣人']
print(names[0:4:2])  # ['路飞', '娜美']

list = [1, 2]
print(list[10:])     # []，切片不会报索引超界的错误
```

##### 遍历

**通过循环一个一个的取列表中的元素就叫遍历。**

```
scores = [12, 89, 67]
for item in scores:
    print(item)

结果：
12
89
67
```

##### 长度

列表和字符串一样，通过**len（数据）方法**获取长度。

```
scores = [12, 89, 67]
print(len(scores))  # 3
```

##### 拼接

列表和字符串一样，通过 + 符号，将**两个同类型**的数据拼接成一个数据。

```
skills = ['通天箓']

new_skills = skills + ['风后奇门', '阿威十八式']
print(new_skills)   # ['通天箓' '风后奇门', '阿威十八式']

new_skills2 = ['风后奇门', '阿威十八式'] + skills
print(new_skills2)  # ['风后奇门', '阿威十八式', '通天箓']
```

##### 重复

列表和字符串一样，通过 * 符号，将数据重复输出产生**一个同类型的新数据**。

```
print([1, 2]*3)  # [1, 2, 1, 2, 1, 2]
```

##### 拷贝

方法：列表.copy()

作用：将列表中的元素全部拷贝一份创建一个新的列表

```
names = ['张三', '李四']
new_names1 = names.copy()
# new_names1 = name[:] # 效果同上
print(new_names1)  # ['张三', '李四']
```

##### 求和

方法：sum（列表）  

作用：求出列表中数值的和。（必须全是整型或浮点型的数据）

```
numbers = [1, 23, -7, -1]
print(sum(numbers))   # 16
```

##### 反向

方法：列表.reverse()

作用：反向列表中的元素(**直接操作原列表，不会产生新的列表**)

```
numbers = [1, 2, 3, 4]
new_names = numbers.reverse()
print(numbers, new_names)  # [4, 3, 2, 1] None
```

##### 排序

方法：列表.sort()

作用：对列表进行排序(默认从小到大排序  -  升序，reverse=True则为降序)

```
numbers = [1, 42, 45, 6, 90]

numbers.sort()  # 升序
print(numbers)  # [1, 6, 42, 45, 90]

numbers.sort(reverse=True)  # 降序
print(numbers)  # [90, 45, 42, 6, 1]
```

##### 打乱

shuffle：打乱、洗牌。**shuffle方法是在原列表上打乱，打乱后不会产生新列表。**

```
from random import shuffle

list1 = []
for item in range(10):
    list1.append(item)

print(list1)			# [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
list2 = shuffle(list1)
print(list1)			# [9, 1, 0, 8, 3, 2, 4, 5, 7, 6]
print(list2)			# None
```

##### 清空

方法：列表.clear()

作用：清空列表中的元素

```
numbers = [5, 'last']
numbers.clear()
# number = []   # 效果同上
print(numbers)  # []
```

##### enumerate方法

enumerate分别取出列表中的下标和值。

```
for a, b in enumerate([3, 5, 8, 11]):
    print(a, b)
    
输出：
0 3
1 5
2 8
3 11
```

##### heapq方法

heapq.nlargest(N, 列表)：选择出列表中最大的N个元素，降序输出

heapq.nsmallest(N, 列表)：选择出列表中最小的N个元素，升序输出

```
import heapq

lis1 = [6, 3, 8, 11, 1, 5, 7, 3]
# 选择出列表中最大的3个元素，降序输出
print(heapq.nlargest(3, lis1))		# [11, 8, 7]
# 选择出列表中最小的3个元素，升序输出
print(heapq.nsmallest(3, lis1))		# [1, 3, 3]
```

### 增删改查

##### 增加

**注意：增加元素，会改变其他元素原有位置，产生新的下标。**

方法：**列表.append(元素)**

作用：在列表**末尾**添加一个元素

```
skills = []

skills.append('气体源流')
print(skills)  # ['气体源流']

skills.append('拘灵遣将')
print(skills)  # ['气体源流', '拘灵遣将']
```

方法：**列表.insert(下标,元素)**

作用：在列表的指定的下标**前**插入一个元素（**下标可以越界**，元素会插入到列表的最前面或者最后面）

```
skills = ['气体源流', '拘灵遣将']

skills.insert(1, '通天箓')
print(skills)  # ['气体源流', '通天箓', '拘灵遣将']

skills.insert(-1, '通天箓')
print(skills)  # ['气体源流', '通天箓', '通天箓'， '拘灵遣将']

skills.insert(10, '通天箓')
print(skills)  # ['气体源流', '通天箓', '通天箓', '拘灵遣将', '通天箓']

skills.insert(0, '通天箓')  # 在列表的最前面插入一个元素
print(skills)  # ['通天箓', '气体源流', '通天箓', '通天箓', '拘灵遣将', '通天箓']
```

方法：列表.extend(序列)

作用：将序列中的每一个元素，添加到列表中。（**序列就是容器类型数据**）

```
names = ['周星驰', '张家辉']
# names.extend(20)  报错，必须是序列

names.extend(['王祖贤'])
print(names)  # ['周星驰', '张家辉', '王祖贤']

names.extend('20')
print(names)  # ['周星驰', '张家辉', '王祖贤', '2', '0']

names.extend(['20'])
print(names)  # ['周星驰', '张家辉', '王祖贤', '2', '0', '20']
```

##### 删除

**注意：删除元素，会改变其他元素原有位置，产生新的下标。**

方法：del 列表[下标]

作用：删除列表中**指定下标**的元素（下标不能越界；**若没有下标，则删除整个列表**）

```
films = ['肖申克的救赎', '阿甘正传', '摔跤吧爸爸', '逃学威龙', '赌神', '赌圣', '英雄本色']
del films[1]
print(films)  # ['肖申克的救赎', '摔跤吧爸爸', '逃学威龙', '赌神', '赌圣', '英雄本色']
```

方法：列表.remove(元素)

作用：删除列表中指定的**元素**（**若多个元素相同，只删除最前面的那一个；若删除的元素不在列表中，会报错**）

```
films = [ '摔跤吧爸爸', '逃学威龙', '逃学威龙', '英雄本色']
films.remove('逃学威龙')
print(films)  # [ '摔跤吧爸爸', '逃学威龙', '英雄本色']
```

方法：列表.pop(下标)

作用：将列表中指定下标的元素**取出来**；没有下标将最后一个元素**取出来**。（下标不能越界）

```
films = ['摔跤吧爸爸', '逃学威龙', '英雄本色']

film = films.pop()
print(films)  # ['摔跤吧爸爸', '逃学威龙']
print(film)   # 英雄本色

film = films.pop(1)  # 上面取出一个元素，films发生变化
print(films)  # ['摔跤吧爸爸']
print(film)   # 逃学威龙
```

##### 修改

方法：列表名[下标] = 新元素

作用：通过下标获取元素，然后重新赋值（下标不能越界）

```
names = ['周星驰', '张家辉', '刘德华', '黄渤', '杨洋']
names[4] = '陈奕迅'
print(names)  # ['周星驰', '张家辉', '刘德华', '黄渤', '陈奕迅']
```

##### 查找

方法：元素  in/not in  列表

作用：判断指定的元素是否在指定的列表中，**结果是布尔值**。

```
names = ['周星驰', '张家辉', '刘德华', '黄渤', '陈奕迅']
result = '高以翔' not in names
print(result)  # True
```

方法：列表.index(元素)

作用：获取指定元素在列表中的下标（如果元素有多个，取第一个）

```
names = ['周星驰', '张家辉', '刘德华', '黄渤', '陈奕迅']
print(names.index('张家辉'))  # 1
```

方法： max/min  列表

作用：获取列表中最大或最小的元素

```
print(max([1, 34, 67, 8]))           # 67
print(max(['a', 'hj', 'uio', 'z']))  # z
print(min([1, 45, 89, 0, -1, 8]))    # -1
```

方法：列表.count(元素)

作用：获取指定元素在列表中出现的次数

```
numbers = [-1, 45, 89, 0, -1, 8]
print(numbers.count(-1))  # 2
```

##### 注意事项

**在增加、删除等改变列表元素个数的操作中，列表长度也会随之变化。**

```
# 删除[23, 43, 45, 78, 32, 90, 89, 10, 9, 1]所有小于60分的成绩

错误方法：
score = [23, 43, 45, 78, 32, 90, 89, 10, 9, 1]
for item in score:
    if item < 60:
        score.remove(item)
print(score)  # [43, 78, 90, 89, 9]

程序过程：
# [23, 43, 45, 78, 32, 90, 89, 10, 9, 1] 	# 23  1 删除
# [43, 45, 78, 32, 90, 89, 10, 9, 1] 		# 45  2 删除
# [43, 78, 32, 90, 89, 10, 9, 1] 			# 32  3 删除
# [43, 78, 90, 89, 10, 9, 1] 				# 89  4
# [43, 78, 90, 89, 10, 9, 1] 				# 10  5 删除
# [43, 78, 90, 89, 9, 1] 					# 1   6 删除
# [43, 78, 90, 89, 9]


# score[:] 取出所有的元素产生新列表
for item in score[:]:
    if item < 60:
        score.remove(item)
print(score)  # [78, 90, 89]
```

### 计数器

```
from collections import Counter

def list_():
    list1 = [1, 1, 1, 7, 8, 4, 4, 7, 7, 7]
    list_count = Counter(list1)
    print(list_count)

if __name__ == '__main__':
    list_()
 
输出：
Counter({7: 4, 1: 3, 4: 2, 8: 1})
# 注释：这里输出了列表中某个数字出现的次数，并从多到少进行了排序
```

**注意：列表不不太适合处理大容量的数据，假如使用循环在列表中添加1亿个元素，内存绝对爆炸。**
