# 进程

### 认识进程

进程（Process）

##### 定义

程序：**是一个静态的可执行文件，占用的是磁盘空间。**

进程：**当计算机运行程序的时候，就会产生一个动态的、有生命周期（程序开始运行到运行结束）的过程，占用的是CPU、内存。**

**注意：一个程序可以有多个进程（但至少要有一个进程）。**

**注意：不同时间运行相同程序，它的进程是不一样的，因为上一个进程的生命周期已经结束，而且进程占用的内存段、内存大小、运行时间都发生了变化。**

**注意：磁盘、硬盘属于外存储器，不属于计算机的运行资源；CPU、内存属于计算机的运行资源。**

##### 进程详解

**进程是计算机运行程序的过程，同时也是cpu资源分配的最小单位。**

操作系统管理所有进程的执行，并为它们合理的分配资源，**每个进程都有自己的地址空间、数据栈以及其他的数据。**

##### 进程特点

　　优点：进程（独立的地址空间），**当一个进程崩溃后，不会对其他的进程产生影响，可以利用多核**。

　　缺点：进程（独立的地址空间）之间切换，**系统资源开销大，数据通信不方便，效率差**。

### 进程程序

##### 进程模块

**multiprocessing是Python的一个进程模块，它提供了一个Process类来代表一个进程对象。**

```
import os
import time
from multiprocessing import Process

def coding():
    print('开始撸代码，PID是%s' % os.getpid())
    time.sleep(4)
    print('写累了，不撸了，PID是%s' % os.getpid())

def play_weixin():
    print('玩一会微信，PID是%s' % os.getpid())
    time.sleep(4)
    print('不玩微信了，开始撸代码，PID是%s' % os.getpid())

if __name__ == '__main__':
    # 创建进程
    p1 = Process(target=coding)
    p2 = Process(target=coding)
    p3 = Process(target=play_weixin)

    # 启动进程
    p1.start()
    # 阻塞进程，等待进程p1结束
    p1.join()

    # 启动进程
    p2.start()
    p3.start()

    # 主进程
    time.sleep(3)
    print('我是主进程，PID是%s' % os.getpid())

输出：
开始撸代码，PID是3192
写累了，不撸了，PID是3192
开始撸代码，PID是12320
玩一会微信，PID是17352
我是主进程，PID是14896		# p2、p3没有阻塞进程，就先执行了下面的print语句
写累了，不撸了，PID是12320
不玩微信了，开始撸代码，PID是17352
```

##### 杀掉进程

按照上面案例代码运行的话，p1进程会一直阻塞，后面的p2和p3并不会执行。如果在windows中直接运行‘启动任务管理器’去杀掉进程，这时候p2和p3的进程就会执行了，说明进程之间是相互没有关联的，互不影响的。如果在linux系统中，直接kill -9 PID，就可以杀掉进程了
