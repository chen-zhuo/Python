# 迭代器

**注意：迭代的含义就是循环。**

### 迭代对象

for循环可以作用于两类数据：1.集合数据类型（list、dict、str等）；2.函数中带yield的生成器。

##### 定义

**可以直接作用于for 循环的对象**统称为**可迭代对象**：**Iterable**

**注意：这里也可以说，生成器是可迭代对象。**

##### isinstance()判断

使用isinstance()就可以判断一个对象是否为可迭代对象

```
>>> from collections import Iterable
>>> isinstance([], Iterable)
True
>>> isinstance({}, Iterable)
True
>>> isinstance('abc', Iterable)
True
>>> isinstance((x for x in range(10)), Iterable)
True
>>> isinstance(100, Iterable)
False
```

### 迭代器

生成器不但可以作用于for循环，还可以被next()函数不断调用并返回下一个值，直到最后抛出StopIteration错误表示无法继续返回下一个值。

##### 定义

**可以被next()函数调用并不断返回下一个值的对象**称为**迭代器**：**Iterator**

**注意：这里也可以说，生成器是迭代器。**

##### isinstance()判断

可以使用isinstance()判断一个对象是否为迭代器

```
>>> from collections import Iterator
>>> isinstance((x for x in range(10)), Iterator)
True
>>> isinstance([], Iterator)
False
>>> isinstance({}, Iterator)
False
>>> isinstance('abc', Iterator)
False
```

##### iter()函数

`list`、`dict`、`str`虽然是`Iterable（可迭代对象）`，却不是`Iterator（迭代器）`。**使用`iter()`函数，把迭代对象变为迭代器**：

```
>>> isinstance(iter({}), Iterator)
True
>>> isinstance(iter('abc'), Iterator)
True
```

### 生成器和迭代器

##### 区别

```
1.通过实现迭代器协议对应的__iter__()和next()方法，可以自定义迭代器类型。
2.可迭代对象，可以通过iter()方法获取迭代器，并且通过next()方法获得容器的下一个元素。
3.生成器是一种特殊的迭代器，内部支持了生成器协议，不需要明确定义__iter__()和next()方法。
4.生成器通过生成器函数产生，生成器函数可以通过常规的def语句来定义，但是不用return返回，而是用yield一次返回一个结果。
```

