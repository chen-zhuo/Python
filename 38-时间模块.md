# 时间模块

### 时间形式

##### 时间戳

时间戳：就是从格林威治时间（1970年1月1日0：0：0）到当前时间的**时间差**（**单位是秒**）

```
例如: 1554722083.8482447，就是一个时间戳，表示格林威治时间和当前的时间差。
```

**注意：通过时间戳的形式去存时间，可以节省内存；还自带对时间加密的功能**

##### struct_time结构

**struct_time结构是一种表达时间的结构**，每部分含义如下：

```
tm_year：年
tm_mon：月
tm_mday：日
tm_hour：时
tm_min：分
tm_sec：秒
tm_wday：星期（0-6-->周一-周天）
tm_yday：当前是当年的第几天
tm_isdst：是否是夏令时
```

```
例如，下面的结果就是struct_time结构的时间
time.struct_time(tm_year=2019, tm_mon=4, tm_mday=8, tm_hour=19, tm_min=21, tm_sec=52, tm_wday=0, tm_yday=98, tm_isdst=0)
```

##### strf_time结构

```
strftime(时间格式，时间)
将时间以指定的格式转换成字符串
* %y 两位数的年份表示（00-99）
* %Y 四位数的年份表示（000-9999）
* %m 月份（01-12）
* %d 月内中的一天（0-31）
* %H 24小时制小时数（0-23）
* %h 12小时制小时数（01-12）
* %M 分钟数（00=59）
* %S 秒（00-59）
* %a 本地简化星期名称
* %A 本地完整星期名称
* %b 本地简化的月份名称
* %B 本地完整的月份名称
* %c 本地相应的日期表示和时间表示
* %j 年内的一天（001-366）
* %p 本地A.M.或P.M.的等价符
* %U 一年中的星期数（00-53）星期天为星期的开始
* %w 星期（0-6），星期天为星期的开始
* %W 一年中的星期数（00-53）星期一为星期的开始
* %x 本地相应的日期表示
* %X 本地相应的时间表示
* %Z 当前时区的名称
* %% %号本身
```

```
例如：2019-04-09 01:38:12，就是strf_time结构的时间。
```

### time模块

time模块是一个Python内置的**处理时间**模块（**时分秒**）

##### 当前时间

time.time（）：获取当前时间的时间戳

```
import time

time1 = time.time()
print(time1, type(time1))

输出：
1554722083.8482447 <class 'float'>
```

time.localtime（参数）：获取当前struct_time时间

1. 不传参，就是将**当前时间对应的时间戳转换成struct_time**（**当前时间的时间戳可以不写**）
2. 传参，就是将**指定的时间对应的时间戳转换成struct_time**（**指定时间的时间戳必须写**）

```
time2 = time.localtime()
print(time2)

print(time2.tm_year, time2.tm_mon, time2.tm_mday)

输出：
time.struct_time(tm_year=2019, tm_mon=4, tm_mday=8, tm_hour=19, tm_min=21, tm_sec=52, tm_wday=0, tm_yday=98, tm_isdst=0)

2019 4 8
```

time.strftime('时间格式', struct_time时间)：获取当前strf_time时间

```
time_str = time.strftime('%Y-%m-%d %H:%M:%S', time.localtime())
print(time_str)

输出：
2019-04-09 01:43:17
```

time.ctime()：获取当前时间的英文格式

```
import time

print(time.ctime())

输出：
Fri Dec  7 16:37:56 2018
```

##### 时间形式转换

**将时间戳转换为struct_time**

strptime(需要转换的字符串，时间格式)：**将时间字符串转换成相应的struct_time**

```
struct_time = time.strptime('2018-7-20', '%Y-%m-%d')
print(struct_time)

输出：
time.struct_time(tm_year=2018, tm_mon=7, tm_mday=20, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=4, tm_yday=201, tm_isdst=-1)
```

**将struct_time转换成时间戳**

time.mktime（struct_time时间）：**将struct_time转换成时间戳**

```
srtc = time.strptime('2018-12-31 23:30:40', '%Y-%m-%d %H:%M:%S')
print(srtc)
time1 = time.mktime(srtc)
print(time1)

# 时间加一个小时
time1 += 60*60
print(time.localtime(time1))

输出：
time.struct_time(tm_year=2018, tm_mon=12, tm_mday=31, tm_hour=23, tm_min=30, tm_sec=40, tm_wday=0, tm_yday=365, tm_isdst=-1)
1546270240.0
time.struct_time(tm_year=2019, tm_mon=1, tm_mday=1, tm_hour=0, tm_min=30, tm_sec=40, tm_wday=1, tm_yday=1, tm_isdst=0)

```

##### 延迟

time.sleep(秒)：可以让线程阻塞指定的时间

```
time.sleep(10)  # 休息10秒
```

### datetime模块

datetime模块是Python内置的**处理日期**的模块（**年月日**）

##### 当前时间

```
import datetime

# now(时区)： 获取当前时间
now_dt = datetime.datetime.now()
print(now_dt)					# 2019-04-13 03:22:57.090185
# 获取datetime中日期的部分
print(now_dt.date())			# 2019-04-13
# 获取datatime中时分秒的部分
print(now_dt.time())			# 03:22:57.090185


# 获取当前日期
# 创建了时间类today
today = datetime.date.today()
print(today)					# 2019-04-09
# 年(year)、月(month)、日(day)属性
print(today.year)				# 2019
print(today.month)				# 4
print(today.day)				# 9
# 获取指定日期对应的星期
print(today.isoweekday())		# 2
# 将指定日期转换成指定格式的字符串日期
print(today.strftime('%Y-%m-%d-%w'))	# 2019-04-09-2
```

##### 时间形式转换

```
# 获取当前日期
today = datetime.date.today()
print(today)					# 2019-04-09
# 将日期转换成struct_time
print(today.timetuple())		# time.struct_time(tm_year=2019, tm_mon=4, tm_mday=9...)

# now(时区)： 获取当前时间
now_dt = datetime.datetime.now()
print(now_dt)					# 2019-04-09 02:14:01.741628
# 将datetime转换成时间戳
print(now_dt.timestamp())		# 1554747428.028299

# 将时间戳转换成日期
today2 = datetime.date.fromtimestamp(0)
print(today2)					# 1970-01-01
```

##### datetime属性

```
# 创建日期对象
print(datetime.date(2017, 9, 10))	# 2017-09-10
# 将时间字符串按指定的格式转换成datetime对象
print(datetime.datetime.strptime('2018-8-10 10:30:40', '%Y-%m-%d %H:%M:%S'))
									# 2018-08-10 10:30:40
# 最小日期
print(datetime.date.min)			# 0001-01-01
# 最大日期
print(datetime.date.max)			# 9999-12-31
# 最小单位
print(datetime.date.resolution) 	# 1 day, 0:00:00
```

##### timedelta方法

```
# now(时区)： 获取当前时间
now_dt = datetime.datetime.now()
print(now_dt)									# 2019-04-09 02:27:47.907620
# 日期加一天
print(now_dt + datetime.timedelta(days=1))		# 2019-04-10 02:27:47.907620
# 日期减两天
print(now_dt + datetime.timedelta(days=-2))		# 2019-04-07 02:27:47.907620
# 时间增加50分钟
print(now_dt + datetime.timedelta(minutes=50))	# 2019-04-09 03:17:47.907620
# 时间增加1000毫秒
print(now_dt + datetime.timedelta(microseconds=1000))# 2019-04-09 02:27:47.908620
```

### 计时器

利用`time.time()`获取当前时间，再求差，就可以写一个计时器。

```
import time

def s_time():
	time1 = time.time()		# time1是函数开始时间
	bei()					# 运行bei函数
	time2 = time.time()		# time2是函数结束时间
	print(time2-time1)		# 完成函数所用的时间
	
def bei():
	for i in range(1,100000):
		if i % 2 == 0:
			pass

s_time()

输出：
0.16011357307434082
```

### 日差器

```
import datetime

# 日期
str1 = '2007-2-5'
str2 = '2007-3-6'

def days(str1, str2):
    date1 = datetime.datetime.strptime(str1[0:10], "%Y-%m-%d")
    date2 = datetime.datetime.strptime(str2[0:10], "%Y-%m-%d")
    num = (date2 - date1).days
    return num

print(str(days(str1, str2))+'day')

答案：
29day
```
