# 文件读写

##### 文件类型

文本文件：**存储有效字符信息的文件**

二进制文件：包括**音频文件、视频文件、图片文件**

##### 操作流程

文件操作流程：打开文件 -> 操作文件（读/写） -> 关闭文件

### 打开文件

##### 格式

open（**文件路径，打开方式，编码方式**）

##### 文件路径

文件路径 ---> 决定打开哪个文件

绝对路径：**文件在磁盘中的完整位置**

**注意：放在工程外面的文件，写绝对路径**

```
C:\酌\Desktop\新建文本文档.txt
```

（推荐）相对路径：**相对于当前进行操作的文件的位置**（. /或 . . /）

**注意：将文件放到工程目录下的某个位置，写相对路径**

```
./test1.txt   # 表示test1文件和操作文件在同一文件夹下
../test1.txt  # 表示test1文件和操作文件在不同一文件夹下
```

##### 打开方式

打开方式 ---> 进行什么样的操作

```
文本文件：
'r' （默认）- 读操作（读出来是字符串）
'w'        - 写操作（清空原有数据，将文本数据写入文件）
'a'        - 写操作（保留以前的数据，将新的数据写入文件）

二进制文件：
'rb'/'br'  - 读操作（读出来的数据是二进制）
'wb'/'bw'  - 写操作（清空原有数据，将二进制数据写入文件）
```

**注意：以读的方式'r'或'rb'打开文件，如果这个文件不存在，会报错；以写的方式'w'或'wb'打开文件，如果这个文件不存在，就会创建这个文件。**

##### 编码方式

编码方式 ---> **针对文本文件的读写，二进制文件不能设置**

```
encoding='utf-8'
```

（不同的操作系统默认的文本编码方式不同，**windows ->gbk，mac->utf-8**）

### 读写关闭

##### 读格式

文件.read(n)	- n：设置读的长度，可以不写

##### 写格式

文件.write(**'写入的内容'**)

##### 关闭格式

文件.close()

**注意：上面的 ‘文件’ 指的是上面的打开文件后赋值的变量**

### 文本文件

**同一目录**下新建test1.txt文件，内容如下：

##### 读操作

test1.txt文件

```
疑是地上霜
```

操作流程

```
f = open('./test1.txt', 'r', encoding='utf-8')  # 打开方式'r'

content = f.read()
print(content) 		 # 疑是地上霜

# content = f.readline()只读取第一行信息，content是该信息字符串
# content = f.readlines()读取每行信息，每行信息就是一个列表的参数，content就是该列表

f.close()
```

##### 写操作

test1.txt文件

```
空
```

操作流程

```
f = open('./test1.txt', 'w', encoding='utf-8')  # 打开方式'w'

f.write('疑是地上霜')  # 向文件里面写入'疑是地上霜'

f.close()
```

test1.txt文件

```
疑是地上霜
```

### 二进制文件

##### 读操作

```
f = open('./img.jpg', 'rb')  # 打开方式'rb'

image_date = f.read()
print(image_date)            # b'\xff\xd8\xff\xe0\...（b开头的二进制流数据）

f.close()
```

##### 写操作

```
f = open('./lew.jpg', 'wb')  # 打开方式'wb'

f.write(image_date)	     # 这里写入的二进制数据就是上面的数据流

f.close()

# 注释：这样相当于把上面的img图片赋值到了lew图片中。
```

### 关键字with

##### 作用

通过with关键字去打开文件，**在文件操作结束后会自动去关闭文件**

##### 格式

```
with open() as 文件变量名：
     文件操作
```

##### 读操作

```
with open('./lew.jpg', 'rb')as f:
    jpg_date = f.read()
```

##### 写操作

```
with open('./lewr.jpg', 'wb')as f:
    f.write(jpg_date)
```
